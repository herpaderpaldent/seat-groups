language: php

php:
- 7.2.1

services:
  - redis-server

addons:
  hosts:
    - redis
  code_climate:
    repo_token:
      secure: "pbpD2YEnd5vlrzXUWFbIZ/8CZBHM9R/fTZgI/A7qM90UUhVnEuzQtqnciqo7c2xhJizMWP1upuRu0Kj5WaLcOsXYLHlHMnGfFQTepsC62SbDpR3BYHF0CykEhKQ5fYaT+WbexIn1TtC0+hTIHLRJOFLIOu5Zb9bK0GsNQCHdrc8wqVoYiO9gFYXv7kRkt+qtBQ4hhogUWIS1vUrTCzz5yrMUsLBTNZfIvkwOR90yasppEoWqrIkRTFmhSV6oAV43V/tjvJ7UTd+r0KP1Z26lotG1+PeuSgywSZwEcmedIrJLe04b1R9txaKk8Jwz5f3jFFG/tCBIrFoxFrAnAdm+5BKJO0CRoI0dyO1JonFgkE2H1PM/XUUv8VgxzV6jDuzwiUbDcFsW6GBQZz2BGufShDsy3rCju6VWGoRuqGMLse2pDMO5SU8LOHy01Jm5r52cleO/nLMCVVPbekwOyqkDu1sSz85+oRtGTFUutTAc5D536DB5DcdpwMiA6pqCcyBTydpPvWtIGUwtjLKUfOeEQ+tftb2ZgsYyvJlXq9f7ccvfXvqYKbj1wtgMgXhpFOw3svuCwUUIJKxC9Ogm64kmqX9Wpii9fP5vGPt1OC9DzvotnSfAqxKryPOVMz1nxjYMxpH/h5TZeQ4gDqiUHkZevSmv8UldwS0BtGYlT0EQpE0="

before_script:
- composer self-update
- composer install --no-interaction
- composer dump-autoload

script:
- vendor/bin/phpunit --coverage-clover build/logs/clover.xml

after_script:
  - vendor/bin/test-reporter